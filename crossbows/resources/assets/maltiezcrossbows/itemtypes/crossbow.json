{
  "code": "crossbow",
  "creativeinventory": {"maltiezcrossbows": ["*"]},
  "variantgroups": [{"code": "drawtype", "states": ["simple", "stirrup", "goatsfoot", "windlass"]}, {"code": "type", "states": ["plain"]}],
  "maxstacksize": 1,
  "durabilityByType": {"*-simple-*": 300, "*-stirrup-*": 600, "*-goatsfoot-*": 1600, "*-windlass-*": 1200},
  "tool": "bow",
  "rackable": true,
  "behaviors": [
    {
      "name": "AnimatableProcedural",
      "properties": {
        "animated-shape": "maltiezcrossbows:crossbows/crossbow-{drawtype}-animated-tp",
        "animated-shape-fp": "maltiezcrossbows:crossbows/crossbow-{drawtype}-animated-fp",
        "only-when-animating": false
      }
    },
    {
      "name": "GroundStorable",
      "properties": {
        "layout": "WallHalves",
        "wallOffY": 2,
        "sprintKey": true,
        "selectionBox": {"x1": 0, "y1": 0, "z1": 0, "x2": 1, "y2": 0.1, "z2": 1},
        "collisionBox": {"x1": 0, "y1": 0, "z1": 0, "x2": 0, "y2": 0, "z2": 0}
      }
    },
    {
      "name": "FiniteStateMachine",
      "properties": {
        "initialState": "unloaded",
        "systems": {
          "camera": {"class": "CameraSettings"},
          "durability": {"Class": "Durability"},
          "sound": {"class": "Sounds", "domain": "maltiezcrossbows"},
          "attachments": {
            "class": "Attachments",
            "stackSystem": "ammo-bolt",
            "transforms": {"default": {"translation": {"x": 0, "y": 0, "z": 13}, "rotation": {"x": 0, "y": 0, "z": 0}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 0.8}}
          },
          "player-animation": {
            "class": "ProceduralPlayerAnimation",
            "categories": {"hands": {"blending": "Average", "weight": 1024}, "empty": {"blending": "Average", "weight": 16}},
            "animations": {
              "idle": [{"action": "EaseIn", "animation": "crossbowskeyframes", "duration_ms": 700, "dynamic": "CosShifted", "frame": 4, "separateFp": true}],
              "draw": [
                {
                  "action": "EaseIn",
                  "animation": "crossbowskeyframes",
                  "duration_ms": 700,
                  "dynamic": "CosShifted",
                  "frameByType": {"*-simple-*": 2, "*-stirrup-*": 6, "*-goatsfoot-*": 2, "*-windlass-*": 3},
                  "separateFp": true
                },
                {
                  "action": "EaseIn",
                  "animation": "crossbowskeyframes",
                  "duration_msByType": {"*-simple-*": 1300, "*-stirrup-*": 3300, "*-goatsfoot-*": 5800, "*-windlass-*": 12300},
                  "dynamic": "CosShifted",
                  "frameByType": {"*-simple-*": 2, "*-stirrup-*": 6, "*-goatsfoot-*": 2, "*-windlass-*": 3},
                  "separateFp": true
                },
                {
                  "action": "EaseIn",
                  "animation": "crossbowskeyframes",
                  "duration_msByType": {"*-simple-*": 100, "*-stirrup-*": 1000, "*-goatsfoot-*": 100, "*-windlass-*": 1000},
                  "dynamic": "CosShifted",
                  "frameByType": {"*-simple-*": 2, "*-stirrup-*": 4, "*-goatsfoot-*": 2, "*-windlass-*": 4},
                  "separateFp": true
                }
              ],
              "load": [{"action": "EaseIn", "animation": "crossbowskeyframes", "duration_ms": 700, "dynamic": "CosShifted", "frame": 5, "separateFp": true}],
              "aim": [{"action": "EaseIn", "animation": "crossbowskeyframes", "duration_ms": 450, "dynamic": "SinQuadratic", "frame": 1, "separateFp": true}],
              "ease": [{"action": "EaseOut", "animation": "crossbowskeyframes", "duration_ms": 300, "dynamic": "CosShifted", "frame": 0, "separateFp": true}],
              "empty": [{"action": "EaseIn", "animation": "crossbowsempty", "duration_ms": 200, "dynamic": "Linear", "frame": 0, "separateFp": true}],
              "empty-stop": [{"action": "EaseOut", "animation": "crossbowsempty", "duration_ms": 200, "dynamic": "Linear", "frame": 0, "separateFp": true}]
            }
          },
          "stats": {"class": "Stats"},
          "item-animation": {
            "class": "ProceduralItemAnimation",
            "categories": {"main": {"blending": "AddAverage", "weight": 1}},
            "animations": {
              "unloaded": [{"action": "Set", "animation": "draw", "frame": 0}],
              "drawn": [{"action": "Set", "animation": "load", "frame": 0}],
              "loaded": [{"action": "Set", "animation": "release", "frame": 0}],
              "draw": [
                {"action": "Set", "animation": "draw", "frame": 1},
                {"action": "EaseIn", "animation": "draw", "duration_msByType": {"*-simple-*": 500, "*-stirrup-*": 1000, "*-goatsfoot-*": 500, "*-windlass-*": 1500}, "dynamic": "Linear", "frame": 1},
                {
                  "action": "Play",
                  "animation": "draw",
                  "duration_msByType": {"*-simple-*": 1500, "*-stirrup-*": 3500, "*-goatsfoot-*": 6000, "*-windlass-*": 12000},
                  "dynamic": "Linear",
                  "startFrame": 0,
                  "endFrameByType": {"*-simple-*": 29, "*-stirrup-*": 25, "*-goatsfoot-*": 119, "*-windlass-*": 133}
                }
              ],
              "load": [
                {"action": "Set", "animation": "load", "frame": 0},
                {"action": "EaseIn", "animation": "load", "duration_ms": 750, "dynamic": "Linear", "frame": 0},
                {"action": "Play", "animation": "load", "duration_ms": 1750, "dynamic": "Linear", "startFrame": 0, "endFrame": 29}
              ],
              "release": [
                {
                  "action": "Play",
                  "animation": "release",
                  "duration_msByType": {"*-simple-*": 100, "*-stirrup-*": 300, "*-goatsfoot-*": 300, "*-windlass-*": 300},
                  "dynamic": "Linear",
                  "startFrame": 0,
                  "endFrame": 29
                }
              ]
            }
          },
          "ammo-bolt": {
            "class": "Requirements",
            "selectorRequirement": "bolt",
            "bolt": {"requirements": [{"amount": 1, "location": "maltiezcrossbows:bolt-*", "description": "maltiezcrossbows:requirement-bolt"}]}
          },
          "load-equipment": {
            "class": "Requirements",
            "load-aid": {
              "requirementsByType": {
                "*-simple-*": [],
                "*-stirrup-*": [],
                "*": [{"amount": 1, "location": "maltiezcrossbows:spanningtool-{drawtype}", "description": "maltiezcrossbows:item-spanningtool-{drawtype}"}]
              }
            },
            "empty-offhand": {"slot": "OffHand", "search": "Blacklist"}
          },
          "projectile": {"class": "Projectiles", "stackSystem": "ammo-bolt", "amount": 1, "speed": 3, "aimingSystem": "aiming", "description": "maltiezcrossbows:weapon-projectile-stats"},
          "aiming": {"class": "Aiming", "duration": 400, "dispersionMin_MOA": 130, "dispersionMax_MOA": 260, "description": "maltiezcrossbows:system-desctiption-aim"}
        },
        "operations": {
          "draw": {
            "class": "Delayed",
            "timeoutBytype": {"*-simple-*": 2000, "*-stirrup-*": 5000, "*-goatsfoot-*": 6500, "*-windlass-*": 14000},
            "states": {"initial": "unloaded", "timeout": "drawn", "transitional": "draw", "final": "unloaded"},
            "inputs": {"initial": "mouse-right-down-reload", "unloaded": ["mouse-right-up", "item-dropped", "slot-deselected", "item-dropped"]},
            "systems": {
              "initial": [
                {"code": "player-animation", "action": "start", "animation": "draw", "category": "hands"},
                {"code": "item-animation", "action": "start", "animation": "draw", "category": "main"},
                {"code": "camera", "action": "set", "setting": "FirstPersonHandsPitch", "valueByType": {"*-simple-*": 1, "*-stirrup-*": 0, "*-goatsfoot-*": 1, "*-windlass-*": 0}},
                {"code": "camera", "action": "set", "setting": "WalkBobbingAmplitude", "value": 0.67},
                {"code": "stats", "stat": "walkspeed", "valueByType": {"*-simple": -0.2, "*-stirrup": -1, "*-goatsfoot": -0.4, "*-windlass": -1}},
                {"code": "load-equipment", "action": "take", "requirement": "load-aid"},
                {"code": "load-equipment", "action": "check", "requirement": "empty-offhand"}
              ],
              "unloaded": [
                {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
                {"code": "item-animation", "action": "start", "animation": "unloaded", "category": "main"},
                {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
                {"code": "stats", "stat": "walkspeed", "value": 0},
                {"code": "load-equipment", "action": "put", "requirement": "load-aid"},
                {"code": "load-equipment", "action": "put"}
              ],
              "timeout": [
                {"code": "load-equipment", "action": "put"},
                {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
                {"code": "player-animation", "action": "start", "animation": "empty-stop", "category": "empty"},
                {"code": "camera", "action": "reset", "setting": "FirstPersonHandsPitch"},
                {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
                {"code": "load-equipment", "action": "put", "requirement": "load-aid"},
                {"code": "stats", "stat": "walkspeed", "value": 0}
              ]
            }
          },
          "load": {
            "class": "Delayed",
            "timeout": 2500,
            "states": [{"initial": "drawn", "timeout": "loaded", "transitional": "load", "final": "drawn"}],
            "inputs": {"initial": ["mouse-right-down-reload", "drawing-finished"], "drawn": ["mouse-right-up", "item-dropped", "slot-deselected"]},
            "systems": {
              "initial": [
                {"code": "player-animation", "action": "start", "animation": "load", "category": "hands"},
                {"code": "item-animation", "action": "start", "animation": "load", "category": "main"},
                {"code": "camera", "action": "set", "setting": "WalkBobbingAmplitude", "value": 0.67},
                {"code": "stats", "stat": "walkspeed", "value": -0.2},
                {"code": "load-equipment", "action": "check", "requirement": "empty-offhand"},
                {"code": "ammo-bolt", "action": "take", "requirement": "bolt"},
                {"code": "attachments", "action": "add", "point": "bolt", "transform": "default"}
              ],
              "timeout": [
                {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
                {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
                {"code": "stats", "stat": "walkspeed", "value": 0}
              ],
              "drawn": [
                {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
                {"code": "item-animation", "action": "start", "animation": "drawn", "category": "main"},
                {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
                {"code": "stats", "stat": "walkspeed", "value": 0},
                {"code": "ammo-bolt", "action": "put", "requirement": "bolt"},
                {"code": "attachments", "action": "remove", "point": "bolt", "transform": "default"}
              ]
            }
          },
          "aim": {
            "class": "Instant",
            "inputs": ["mouse-right-down-aim", "loading-finished"],
            "states": [{"initial": "loaded", "final": "aimed"}],
            "systems": [
              {"code": "player-animation", "action": "start", "animation": "aim", "category": "hands"},
              {"code": "player-animation", "action": "start", "animation": "empty", "category": "empty"},
              {"code": "camera", "action": "set", "setting": "FirstPersonHandsPitch", "value": 1.25},
              {"code": "camera", "action": "set", "setting": "WalkBobbingAmplitude", "value": 0.65},
              {"code": "stats", "stat": "walkspeed", "value": -0.3},
              {"code": "aiming", "action": "start"}
            ]
          },
          "release": {
            "class": "Instant",
            "inputs": "mouse-left-down-release",
            "states": [{"initial": "aimed", "final": "unloaded"}],
            "systems": [
              {"code": "item-animation", "action": "start", "animation": "release", "category": "main"},
              {"code": "sound", "action": "play", "sound": "release"},
              {"code": "projectile"},
              {"code": "ammo-bolt", "action": "clear"},
              {"code": "durability", "action": "change", "amount": -1, "destroy": true},
              {"code": "attachments", "action": "remove", "point": "bolt", "transform": "default"}
            ]
          },
          "ease": {
            "class": "Instant",
            "inputs": "mouse-right-up",
            "states": [{"initial": "aimed", "final": "loaded"}, {"initial": "unloaded", "final": "unloaded"}],
            "systems": [
              {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
              {"code": "player-animation", "action": "start", "animation": "empty-stop", "category": "empty"},
              {"code": "camera", "action": "reset", "setting": "FirstPersonHandsPitch"},
              {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
              {"code": "stats", "stat": "walkspeed", "value": 0}
            ]
          },
          "deselected": {
            "class": "Instant",
            "inputs": ["item-dropped", "slot-deselected"],
            "states": [{"initial": "aimed", "final": "drawn"}, {"initial": "loaded", "final": "drawn"}, {"initial": "unloaded", "final": "unloaded"}, {"initial": "drawn", "final": "drawn"}],
            "systems": [
              {"code": "player-animation", "action": "start", "animation": "ease", "category": "hands"},
              {"code": "player-animation", "action": "start", "animation": "empty-stop", "category": "empty"},
              {"code": "item-animation", "action": "stop", "category": "main"},
              {"code": "camera", "action": "reset", "setting": "FirstPersonHandsPitch"},
              {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
              {"code": "stats", "stat": "walkspeed", "value": 0},
              {"code": "ammo-bolt", "action": "put"},
              {"code": "aiming", "action": "stop"}
            ]
          },
          "selected-unloaded": {
            "class": "Instant",
            "inputs": ["slot-selected", "slot-modified"],
            "states": [{"initial": "unloaded", "final": "unloaded"}, {"initial": "draw", "final": "unloaded"}],
            "systems": [
              {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
              {"code": "item-animation", "action": "start", "animation": "unloaded", "category": "main"},
              {"code": "camera", "action": "reset", "setting": "FirstPersonHandsPitch"},
              {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
              {"code": "attachments", "action": "refresh", "point": "bolt", "transform": "default"},
              {"code": "stats", "stat": "walkspeed", "value": 0}
            ]
          },
          "selected-drawn": {
            "class": "Instant",
            "inputs": ["slot-selected", "slot-modified"],
            "states": [{"initial": "drawn", "final": "drawn"}, {"initial": "load", "final": "drawn"}],
            "systems": [
              {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
              {"code": "item-animation", "action": "start", "animation": "drawn", "category": "main"},
              {"code": "camera", "action": "reset", "setting": "FirstPersonHandsPitch"},
              {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
              {"code": "attachments", "action": "refresh", "point": "bolt", "transform": "default"},
              {"code": "stats", "stat": "walkspeed", "value": 0}
            ]
          },
          "selected-loaded": {
            "class": "Instant",
            "inputs": ["slot-selected", "slot-modified"],
            "states": [{"initial": "loaded", "final": "drawn"}, {"initial": "aimed", "final": "drawn"}],
            "systems": [
              {"code": "player-animation", "action": "start", "animation": "idle", "category": "hands"},
              {"code": "camera", "action": "reset", "setting": "FirstPersonHandsPitch"},
              {"code": "camera", "action": "reset", "setting": "WalkBobbingAmplitude"},
              {"code": "attachments", "action": "refresh", "point": "bolt", "transform": "default"},
              {"code": "ammo-bolt", "action": "put"},
              {"code": "stats", "stat": "walkspeed", "value": 0}
            ]
          }
        },
        "inputs": {
          "mouse-right-down-reload": {"class": "Mouse", "key": "Right", "alt": false, "type": "pressed", "name": "maltiezcrossbows:weapon-reload"},
          "mouse-right-down-aim": {"class": "Mouse", "key": "Right", "alt": false, "type": "pressed", "name": "maltiezcrossbows:weapon-aim"},
          "mouse-right-up": {"class": "Mouse", "key": "Right", "alt": false, "type": "released", "handle": false},
          "mouse-left-down-release": {"class": "Mouse", "key": "Left", "alt": false, "type": "pressed", "name": "maltiezcrossbows:weapon-range-attack"},
          "slot-deselected": {"class": "SlotChange"},
          "slot-selected": {"class": "SlotSelected"},
          "drawing-finished": {"class": "OperationFinished", "operation": "draw"},
          "loading-finished": {"class": "OperationFinished", "operation": "load"},
          "item-dropped": {"class": "SlotContent", "type": "AllTaken"},
          "slot-modified": {"class": "SlotContent", "type": "AfterModified"}
        }
      }
    }
  ],
  "attributes": {
    "toolrackTransform": {"translation": {"x": 0, "y": 0.6, "z": 0.5}, "rotation": {"x": 173, "y": -90, "z": 0}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 1.34},
    "groundStorageTransformByType": {
      "*-simple-*": {"translation": {"x": 0.5, "y": 0.76, "z": 0.74}, "rotation": {"x": 104, "y": -180, "z": -155}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 0.81},
      "*-stirrup-*": {"translation": {"x": 0.5, "y": 0.7, "z": 0.74}, "rotation": {"x": 110, "y": -180, "z": -155}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 0.81},
      "*-goatsfoot-*": {"translation": {"x": 0.5, "y": 0.54, "z": 0.74}, "rotation": {"x": 110, "y": -180, "z": -155}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 0.81},
      "*-windlass-*": {"translation": {"x": 0.5, "y": 0.69, "z": 0.74}, "rotation": {"x": 105, "y": -180, "z": -155}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 0.81}
    }
  },
  "heldLeftTpIdleAnimation": "crossbowsempty",
  "heldLeftReadyAnimation": "crossbowsempty",
  "heldRightReadyAnimation": "crossbowsempty",
  "heldOldTpIdleAnimation": "crossbowsempty",
  "heldTpUseAnimation": "crossbowsempty",
  "shape": {"base": "maltiezcrossbows:crossbows/crossbow-{drawtype}-animated-tp"},
  "guiTransformByType": {
    "*-simple-*": {"translation": {"x": 0, "y": 0, "z": 0}, "rotation": {"x": -52, "y": -39, "z": 180}, "origin": {"x": 0.45, "y": -1, "z": -0.85}, "scale": 0.9},
    "*": {"translation": {"x": 0, "y": 0, "z": 0}, "rotation": {"x": -52, "y": -41, "z": 180}, "origin": {"x": -0.05, "y": 0.1, "z": 0.05}, "scale": 0.95}
  },
  "tpHandTransform": {"translation": {"x": -0.2, "y": 0, "z": 0}, "rotation": {"x": 0, "y": -90, "z": 0}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 0.8},
  "groundTransform": {"translation": {"x": 0, "y": 0.13, "z": 0}, "rotation": {"x": 1, "y": 0, "z": 0}, "origin": {"x": 0, "y": 0, "z": 0}, "scale": 4.8}
}